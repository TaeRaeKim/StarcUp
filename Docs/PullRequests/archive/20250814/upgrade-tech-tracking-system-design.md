# ì—…ê·¸ë ˆì´ë“œ/í…Œí¬ ì¶”ì  ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì„œ

## 1. ê°œìš”

### 1.1 ëª©ì 
ìŠ¤íƒ€í¬ë˜í”„íŠ¸ ê²Œì„ ë‚´ ì—…ê·¸ë ˆì´ë“œì™€ í…Œí¬ ì—°êµ¬ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì í•˜ê³ , UI ì˜¤ë²„ë ˆì´ì— í‘œì‹œí•˜ê¸° ìœ„í•œ ì‹œìŠ¤í…œ ì„¤ê³„

### 1.2 ë²”ìœ„
- í”Œë ˆì´ì–´ë³„ ì—…ê·¸ë ˆì´ë“œ ë ˆë²¨ (0-3) ì¶”ì 
- í…Œí¬ ì—°êµ¬ ì™„ë£Œ ì—¬ë¶€ (0-1) ì¶”ì 
- ì—°êµ¬ ì§„í–‰ ì¤‘ì¸ í•­ëª©ì˜ ì”ì—¬ ì‹œê°„ ê³„ì‚°
- UI í”„ë¦¬ì…‹ ê¸°ë°˜ ì„ íƒì  ë°ì´í„° ì „ì†¡
- ìƒíƒœ ë³€ê²½ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ

### 1.3 ì£¼ìš” ìš”êµ¬ì‚¬í•­
- ë©”ëª¨ë¦¬ì—ì„œ ì§ì ‘ ì—…ê·¸ë ˆì´ë“œ/í…Œí¬ ë°ì´í„° ì½ê¸°
- ì‚¬ìš©ì ì •ì˜ ì¹´í…Œê³ ë¦¬ë³„ ê·¸ë£¹í™”
- ì‹¤ì‹œê°„ ìƒíƒœ ë³€ê²½ ê°ì§€ ë° ì•Œë¦¼
- ì§„í–‰ë¥ , ì”ì—¬ì‹œê°„ ë“± ë¶€ê°€ ì •ë³´ ì œê³µ

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì „ì²´ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        StarcUp.UI                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         React Components (UpgradeTracker)             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              IPC Communication Layer                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ Named Pipe
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       StarcUp.Core                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              CommunicationService                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚               UpgradeManager                          â”‚ â”‚
â”‚  â”‚    (Business Logic, Event System & Processing)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            UpgradeMemoryAdapter                       â”‚ â”‚
â”‚  â”‚             (Memory Reading Layer)                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              MemoryService (Existing)                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ê³„ì¸µë³„ ì±…ì„

#### Infrastructure Layer (ë©”ëª¨ë¦¬ ì ‘ê·¼)
- **UpgradeMemoryAdapter**: ë©”ëª¨ë¦¬ ì˜¤í”„ì…‹ì„ í†µí•œ ì§ì ‘ ë°ì´í„° ì½ê¸°
- **MemoryService**: ê¸°ì¡´ ë©”ëª¨ë¦¬ ì ‘ê·¼ ì¸í”„ë¼ í™œìš©

#### Business Layer (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
- **UpgradeService**: ë°ì´í„° ê°€ê³µ, ì§„í–‰ ì‹œê°„ ê³„ì‚°, ìƒíƒœ ê´€ë¦¬
- **UpgradeManager**: UI í†µì‹ , ì´ë²¤íŠ¸ ê´€ë¦¬, í”„ë¦¬ì…‹ ì²˜ë¦¬

#### Communication Layer (í†µì‹ )
- **NamedPipeProtocol**: ëª…ë ¹/ì´ë²¤íŠ¸ í”„ë¡œí† ì½œ ì •ì˜
- **CommunicationService**: ë©”ì‹œì§€ ë¼ìš°íŒ… ë° í•¸ë“¤ëŸ¬

#### UI Layer (í‘œì‹œ)
- **React Components**: ì—…ê·¸ë ˆì´ë“œ/í…Œí¬ ìƒíƒœ í‘œì‹œ
- **IPC Handler**: Coreì™€ì˜ ì–‘ë°©í–¥ í†µì‹ 

## 3. ë°ì´í„° ëª¨ë¸

### 3.1 Core ëª¨ë¸

```csharp
// ì—…ê·¸ë ˆì´ë“œ/í…Œí¬ í†µê³„ ë°ì´í„°
public class UpgradeTechStatistics
{
    public List<UpgradeCategoryData> Categories { get; set; }
    public DateTime Timestamp { get; set; }
    public byte PlayerIndex { get; set; }
}

// ì¹´í…Œê³ ë¦¬ë³„ ë°ì´í„°
public class UpgradeCategoryData
{
    public string Id { get; set; }
    public string Name { get; set; }
    public List<UpgradeData> Upgrades { get; set; }
    public List<TechData> Techs { get; set; }
}

// ì—…ê·¸ë ˆì´ë“œ ë°ì´í„°
public class UpgradeData
{
    public UpgradeType Type { get; set; }
    public byte Level { get; set; }           // 0-3
    public int RemainingFrames { get; set; }  // ì§„í–‰ ì¤‘ì¼ ë•Œ
    public int TotalFrames { get; set; }      // ì´ ì†Œìš” í”„ë ˆì„
    public bool IsProgressing { get; set; }
}

// í…Œí¬ ë°ì´í„°
public class TechData
{
    public TechType Type { get; set; }
    public bool IsCompleted { get; set; }
    public int RemainingFrames { get; set; }
    public int TotalFrames { get; set; }
    public bool IsProgressing { get; set; }
}

// ìƒíƒœ ë³€ê²½ ì´ë²¤íŠ¸
public class UpgradeStateChangedEventArgs : EventArgs
{
    public UpgradeType? UpgradeType { get; set; }
    public TechType? TechType { get; set; }
    public byte OldLevel { get; set; }
    public byte NewLevel { get; set; }
    public bool WasCompleted { get; set; }
    public bool IsCompleted { get; set; }
    public byte PlayerIndex { get; set; }
}
```

### 3.2 UI ëª¨ë¸ (TypeScript)

```typescript
// ì—…ê·¸ë ˆì´ë“œ ì„¤ì • (í”„ë¦¬ì…‹)
export interface UpgradeSettings {
  categories: UpgradeCategory[];
  showRemainingTime: boolean;
  showProgressPercentage: boolean;
  showProgressBar: boolean;
  upgradeCompletionAlert: boolean;
  upgradeStateTracking: boolean;
}

// ì‘ë‹µ ë°ì´í„°
export interface UpgradeResponse {
  categories: UpgradeCategoryResponse[];
  timestamp: string;
  playerIndex: number;
}

export interface UpgradeCategoryResponse {
  id: string;
  name: string;
  upgrades: UpgradeDataResponse[];
  techs: TechDataResponse[];
}

export interface UpgradeDataResponse {
  type: string;
  level: number;
  remainingFrames?: number;
  totalFrames?: number;
  isProgressing: boolean;
}

export interface TechDataResponse {
  type: string;
  isCompleted: boolean;
  remainingFrames?: number;
  totalFrames?: number;
  isProgressing: boolean;
}
```

## 4. ë©”ëª¨ë¦¬ ë§¤í•‘

### 4.1 ì—…ê·¸ë ˆì´ë“œ ë©”ëª¨ë¦¬ ì˜¤í”„ì…‹
```
ê¸°ì¤€ ì£¼ì†Œ: ["THREADSTACK0"-00000520]

í”Œë ˆì´ì–´ N ì—…ê·¸ë ˆì´ë“œ:
- Index 0-43:  +0xE1C0 + (N * 44) (44 bytes per player)
- Index 47-54: +0x1023D + (N * 8) (8 bytes per player)

ì˜ˆì‹œ:
- í”Œë ˆì´ì–´ 0: +0xE1C0 (0-43), +0x1023D (47-54)
- í”Œë ˆì´ì–´ 1: +0xE1EC (0-43), +0x10245 (47-54)
- í”Œë ˆì´ì–´ 2: +0xE218 (0-43), +0x1024D (47-54)
```

### 4.2 í…Œí¬ ë©”ëª¨ë¦¬ ì˜¤í”„ì…‹
```
ê¸°ì¤€ ì£¼ì†Œ: ["THREADSTACK0"-00000520]

í”Œë ˆì´ì–´ N í…Œí¬:
- Index 0-23:  +0xDE54 + (N * 24) (24 bytes per player)
- Index 24-43: +0x10050 + (N * 20) (20 bytes per player)

ì˜ˆì‹œ:
- í”Œë ˆì´ì–´ 0: +0xDE54 (0-23), +0x10050 (24-43)
- í”Œë ˆì´ì–´ 1: +0xDE6C (0-23), +0x10064 (24-43)
- í”Œë ˆì´ì–´ 2: +0xDE84 (0-23), +0x10078 (24-43)
```

### 4.3 ë°ì´í„° í•´ì„
- **ì—…ê·¸ë ˆì´ë“œ**: 
  - ë ˆë²¨ì´ ìˆëŠ” ì—…ê·¸ë ˆì´ë“œ: 0=ì—†ìŒ, 1-3=ë ˆë²¨
  - ë‹¨ìˆœ ì—…ê·¸ë ˆì´ë“œ: 0=ë¯¸ì—°êµ¬, 1=ì™„ë£Œ
- **í…Œí¬**: ê° byte ê°’ì´ ì—°êµ¬ ì—¬ë¶€ (0=ë¯¸ì—°êµ¬, 1=ì™„ë£Œ)

## 5. í†µì‹  í”„ë¡œí† ì½œ

### 5.1 ëª…ë ¹ (UI â†’ Core)

```csharp
// í”„ë¦¬ì…‹ ì´ˆê¸°í™” ì‹œ ì—…ê·¸ë ˆì´ë“œ ì„¤ì • í¬í•¨
// CommunicationService.HandlePresetInit() ë‚´ë¶€ì—ì„œ ì²˜ë¦¬
public class PresetInitData
{
    public Presets Presets { get; set; }
}

public class Presets 
{
    public PresetItem Upgrade { get; set; }  // ì—…ê·¸ë ˆì´ë“œ í”„ë¦¬ì…‹
    public PresetItem Worker { get; set; }   // ì¼ê¾¼ í”„ë¦¬ì…‹
    public PresetItem Population { get; set; } // ì¸êµ¬ìˆ˜ í”„ë¦¬ì…‹
    // ... ê¸°íƒ€ í”„ë¦¬ì…‹ë“¤
}

public class PresetItem
{
    public bool Enabled { get; set; }
    public object Settings { get; set; }  // UpgradeSettingsë¡œ ì—­ì§ë ¬í™”
}
```

**ì°¸ê³ **: ì—…ê·¸ë ˆì´ë“œ ë°ì´í„°ëŠ” ì„¤ì •ì´ ë“±ë¡ë˜ë©´ Coreì—ì„œ ìë™ìœ¼ë¡œ Event í˜•ì‹ìœ¼ë¡œ ì „ì†¡ë¨

### 5.2 ì´ë²¤íŠ¸ (Core â†’ UI)

```csharp
// ì—…ê·¸ë ˆì´ë“œ ë°ì´í„° ì—…ë°ì´íŠ¸
public class UpgradeDataUpdatedEvent : IEvent
{
    public UpgradeTechStatistics Data { get; set; }
}

// ì—…ê·¸ë ˆì´ë“œ ìƒíƒœ ë³€ê²½
public class UpgradeStateChangedEvent : IEvent
{
    public UpgradeStateChangedEventArgs Args { get; set; }
}

// ì—…ê·¸ë ˆì´ë“œ ì™„ë£Œ ì•Œë¦¼
public class UpgradeCompletedEvent : IEvent
{
    public string UpgradeName { get; set; }
    public byte Level { get; set; }
}
```

### 5.3 ë°ì´í„° ì§ë ¬í™” ë° ì—­ì§ë ¬í™”

#### Event ì „ì†¡ íŒ¨í„´ (CommunicationService ì°¸ì¡°)
```csharp
// ì—…ê·¸ë ˆì´ë“œ ë°ì´í„° ì´ë²¤íŠ¸ ì „ì†¡
private void SendUpgradeDataEvent(UpgradeTechStatistics statistics)
{
    var eventData = new
    {
        categories = statistics.Categories.Select(c => new
        {
            id = c.Id,
            name = c.Name,
            upgrades = c.Upgrades.Select(u => new
            {
                type = u.Type.ToString(),
                level = u.Level,
                remainingFrames = u.RemainingFrames,
                totalFrames = u.TotalFrames,
                isProgressing = u.IsProgressing
            }),
            techs = c.Techs.Select(t => new
            {
                type = t.Type.ToString(),
                isCompleted = t.IsCompleted,
                remainingFrames = t.RemainingFrames,
                totalFrames = t.TotalFrames,
                isProgressing = t.IsProgressing
            })
        }),
        timestamp = statistics.Timestamp
    };

    _pipeClient.SendEvent(NamedPipeProtocol.Events.UpgradeDataUpdated, eventData);
}
```

#### í”„ë¦¬ì…‹ ìˆ˜ì‹  ë° ì—­ì§ë ¬í™” (HandlePresetInit)
```csharp
private void HandleUpgradePreset(PresetItem upgradePreset)
{
    if (!upgradePreset.Enabled)
    {
        LoggerHelper.Warning("âš¡ ì—…ê·¸ë ˆì´ë“œ ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤");
        return;
    }

    // settings í•„ë“œì—ì„œ UpgradeSettings ê°ì²´ íŒŒì‹±
    if (upgradePreset.Settings != null)
    {
        UpgradeSettings upgradeSettings;
        
        if (upgradePreset.Settings is JsonElement element)
        {
            var jsonText = element.GetRawText();
            upgradeSettings = JsonSerializer.Deserialize<UpgradeSettings>(jsonText);
        }
        else
        {
            LoggerHelper.Error($"ğŸ› ï¸ ì§€ì›ë˜ì§€ ì•ŠëŠ” ì—…ê·¸ë ˆì´ë“œ ì„¤ì • íƒ€ì…: {upgradePreset.Settings.GetType()}");
            return;
        }
        
        // UpgradeManagerì— ì„¤ì • ì ìš©
        _upgradeManager.UpdateSettings(upgradeSettings);
        LoggerHelper.Info($"âœ… ì—…ê·¸ë ˆì´ë“œ ì„¤ì • ì ìš© ì™„ë£Œ: {upgradeSettings.Categories.Count} ê°œ ì¹´í…Œê³ ë¦¬");
    }
}
```

## 6. êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### 6.1 UpgradeMemoryAdapter

```csharp
public interface IUpgradeMemoryAdapter : IDisposable
{
    // ì—…ê·¸ë ˆì´ë“œ ë ˆë²¨ ì½ê¸° (0-3)
    byte GetUpgradeLevel(UpgradeType type, byte playerIndex);
    
    // í…Œí¬ ì™„ë£Œ ì—¬ë¶€ ì½ê¸°
    bool IsTechCompleted(TechType type, byte playerIndex);
    
    // ì§„í–‰ ì¤‘ì¸ ì—…ê·¸ë ˆì´ë“œ/í…Œí¬ ì •ë³´
    (bool isProgressing, int remainingFrames, int totalFrames) 
        GetProgressInfo(int unitTypeOrBuildingId);
    
    // ì „ì²´ ì—…ê·¸ë ˆì´ë“œ ìƒíƒœ ì½ê¸°
    byte[] ReadAllUpgrades(byte playerIndex);
    
    // ì „ì²´ í…Œí¬ ìƒíƒœ ì½ê¸°
    byte[] ReadAllTechs(byte playerIndex);
}
```

### 6.2 UpgradeManager

```csharp
public interface IUpgradeManager
{
    // ì´ë²¤íŠ¸
    event EventHandler<UpgradeStateChangedEventArgs> StateChanged;
    event EventHandler<UpgradeCompletedEventArgs> UpgradeCompleted;
    
    // í”„ë¡œí¼í‹°
    UpgradeTechStatistics CurrentStatistics { get; }
    UpgradeSettings CurrentSettings { get; }
    int LocalPlayerId { get; }
    
    // ì´ˆê¸°í™”
    void Initialize(int localPlayerId);
    
    // ì„¤ì • ì—…ë°ì´íŠ¸
    void UpdateSettings(UpgradeSettings settings);
    
    // ì—…ë°ì´íŠ¸ (GameManagerì—ì„œ 24fpsë¡œ í˜¸ì¶œ)
    void Update();
    
    // ë‚´ë¶€ ë©”ì„œë“œ (private in implementation)
    // - ì¹´í…Œê³ ë¦¬ë³„ ì—…ê·¸ë ˆì´ë“œ/í…Œí¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    // - ìƒíƒœ ë³€ê²½ ê°ì§€
    // - ì§„í–‰ ì‹œê°„ ê³„ì‚°
}
```

## 7. ë°ì´í„° íë¦„

### 7.1 ì´ˆê¸°í™” ì‹œí€€ìŠ¤
```
1. UI â†’ Core: UpdateUpgradeSettingsCommand (í”„ë¦¬ì…‹ ì „ì†¡)
2. Core: UpgradeManager ì„¤ì • ì—…ë°ì´íŠ¸
3. Core: UpgradeService ì´ˆê¸°í™”
4. Core â†’ UI: UpgradeDataUpdatedEvent (ì´ˆê¸° ìƒíƒœ)
```

### 7.2 ì£¼ê¸°ì  ì—…ë°ì´íŠ¸ (24fps - 42ms)
```
1. GameManager.OnUpdateTimerElapsed() â†’ UpgradeManager.Update() í˜¸ì¶œ
2. UpgradeMemoryAdapterë¡œ ë©”ëª¨ë¦¬ ì½ê¸°
3. UpgradeManager ë‚´ë¶€ì—ì„œ ë°ì´í„° ê°€ê³µ
4. ë³€ê²½ì‚¬í•­ ê°ì§€
5. Core â†’ UI: UpgradeDataUpdatedEvent
6. (ë³€ê²½ ì‹œ) Core â†’ UI: UpgradeStateChangedEvent
```

### 7.3 ì„¤ì • ë³€ê²½
```
1. UI â†’ Core: UpdateUpgradeSettingsCommand
2. Core: ì¹´í…Œê³ ë¦¬ ì¬êµ¬ì„±
3. Core â†’ UI: UpgradeDataUpdatedEvent (ìƒˆ êµ¬ì¡°)
```

## 8. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### 8.1 ë©”ëª¨ë¦¬ ì½ê¸° ìµœì í™”
- ë°°ì¹˜ ì½ê¸°: ê°œë³„ ì—…ê·¸ë ˆì´ë“œê°€ ì•„ë‹Œ ì „ì²´ ë°°ì—´ í•œ ë²ˆì— ì½ê¸°
- ìºì‹±: 42ms ì£¼ê¸°ë¡œë§Œ ë©”ëª¨ë¦¬ ì½ê¸° (24fps)
- ë²„í¼ í’€ë§: ë©”ëª¨ë¦¬ í• ë‹¹ ìµœì†Œí™”

### 8.2 í†µì‹  ìµœì í™”
- ë³€ê²½ì‚¬í•­ë§Œ ì „ì†¡: ì „ì²´ ë°ì´í„°ê°€ ì•„ë‹Œ ë¸íƒ€ë§Œ ì „ì†¡
- ì´ë²¤íŠ¸ ë°°ì¹­: ì—¬ëŸ¬ ë³€ê²½ì‚¬í•­ì„ í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ë¡œ ë¬¶ê¸°
- ì••ì¶•: í° ë°ì´í„°ëŠ” ì••ì¶•í•˜ì—¬ ì „ì†¡

### 8.3 UI ë Œë”ë§ ìµœì í™”
- React.memo ì‚¬ìš©: ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
- ê°€ìƒí™”: ë§ì€ í•­ëª© í‘œì‹œ ì‹œ ê°€ìƒ ìŠ¤í¬ë¡¤ë§
- ë””ë°”ìš´ì‹±: ë¹ ë¥¸ ì—…ë°ì´íŠ¸ ì‹œ ë Œë”ë§ ì œí•œ

## 9. ì—ëŸ¬ ì²˜ë¦¬

### 9.1 ë©”ëª¨ë¦¬ ì ‘ê·¼ ì‹¤íŒ¨
- ì¬ì‹œë„ ë¡œì§ (3íšŒ)
- í´ë°± ê°’ ì‚¬ìš© (ì´ì „ ìƒíƒœ ìœ ì§€)
- ì—ëŸ¬ ë¡œê¹… ë° ì‚¬ìš©ì ì•Œë¦¼

### 9.2 í†µì‹  ì˜¤ë¥˜
- ì¬ì—°ê²° ì‹œë„
- ë©”ì‹œì§€ íì‰
- íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬

### 9.3 ë°ì´í„° ë¬´ê²°ì„±
- ì²´í¬ì„¬ ê²€ì¦
- ë²”ìœ„ ê²€ì¦ (ë ˆë²¨ 0-3, ì¸ë±ìŠ¤ ë²”ìœ„)
- ìƒíƒœ ì¼ê´€ì„± ê²€ì¦

## 10. í…ŒìŠ¤íŠ¸ ê³„íš

### 10.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- UpgradeMemoryAdapter: ë©”ëª¨ë¦¬ ì½ê¸° ì •í™•ì„±
- UpgradeService: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²€ì¦
- UpgradeManager: ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸

### 10.2 í†µí•© í…ŒìŠ¤íŠ¸
- Core-UI í†µì‹  í…ŒìŠ¤íŠ¸
- ì „ì²´ ë°ì´í„° íë¦„ í…ŒìŠ¤íŠ¸
- ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (100ms ì£¼ê¸° ìœ ì§€)

### 10.3 ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
- ì—…ê·¸ë ˆì´ë“œ ì§„í–‰ â†’ ì™„ë£Œ ì‹œë‚˜ë¦¬ì˜¤
- ë™ì‹œ ë‹¤ì¤‘ ì—…ê·¸ë ˆì´ë“œ
- ì„¤ì • ë³€ê²½ ì‹œ ë™ì‘
- ì—°ê²° ëŠê¹€/ì¬ì—°ê²°

## 11. í–¥í›„ í™•ì¥ ê°€ëŠ¥ì„±

### 11.1 ê¸°ëŠ¥ í™•ì¥
- ì—…ê·¸ë ˆì´ë“œ í ì˜ˆì¸¡
- ìì› ì†Œë¹„ ê³„ì‚°
- ì—…ê·¸ë ˆì´ë“œ ì¶”ì²œ ì‹œìŠ¤í…œ
- íˆìŠ¤í† ë¦¬ ê¸°ë¡

### 11.2 ì„±ëŠ¥ ê°œì„ 
- ì°¨ë“± ì—…ë°ì´íŠ¸ ì•Œê³ ë¦¬ì¦˜
- ì˜ˆì¸¡ ëª¨ë¸ì„ í†µí•œ í”„ë¦¬í˜ì¹­
- GPU ê°€ì† ë Œë”ë§

### 11.3 ì‚¬ìš©ì„± ê°œì„ 
- ì»¤ìŠ¤í…€ ì•Œë¦¼ ì‚¬ìš´ë“œ
- ì‹œê°ì  íš¨ê³¼ ê°•í™”
- ë‹¨ì¶•í‚¤ ì§€ì›
- ë‹¤ì¤‘ í”Œë ˆì´ì–´ ë™ì‹œ ì¶”ì 

## 12. ì°¸ê³  ìë£Œ

### 12.1 ê¸°ì¡´ êµ¬í˜„ ì°¸ì¡°
- `WorkerManager.cs`: í†µì‹  íŒ¨í„´ ë° ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
- `PopulationManager.cs`: ì£¼ê¸°ì  ì—…ë°ì´íŠ¸ ë° ìƒíƒœ ê´€ë¦¬
- `WorkerStatistics.cs`: ë°ì´í„° ëª¨ë¸ êµ¬ì¡°
- `PopulationStatistics.cs`: í†µê³„ ë°ì´í„° êµ¬ì¡°

### 12.2 ë©”ëª¨ë¦¬ ì˜¤í”„ì…‹ ìë£Œ
- `ê³µí†µ.CT`: Cheat Engine í…Œì´ë¸” (ì—…ê·¸ë ˆì´ë“œ/í…Œí¬ ì˜¤í”„ì…‹)
- ìŠ¤íƒ€í¬ë˜í”„íŠ¸ ë©”ëª¨ë¦¬ ë§µ ë¬¸ì„œ

### 12.3 ê´€ë ¨ íƒ€ì… ì •ì˜
- `UpgradeType`: StarcUp.Coreì˜ ì—…ê·¸ë ˆì´ë“œ ì—´ê±°í˜•
- `TechType`: StarcUp.Coreì˜ í…Œí¬ ì—´ê±°í˜•

## 13. êµ¬í˜„ ì¼ì •

### Phase 1: Core Infrastructure (1ì¼)
- [ ] IUpgradeMemoryAdapter ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- [ ] UpgradeMemoryAdapter êµ¬í˜„
- [ ] UpgradeTechStatistics ëª¨ë¸ ì •ì˜

### Phase 2: Business Logic (1ì¼)
- [ ] IUpgradeManager ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- [ ] UpgradeManager êµ¬í˜„ (WorkerManager íŒ¨í„´ ì°¸ì¡°)
- [ ] GameManagerì— UpgradeManager í†µí•©

### Phase 3: Communication (1ì¼)
- [ ] NamedPipeProtocol ì—…ë°ì´íŠ¸
- [ ] CommunicationService í•¸ë“¤ëŸ¬ ì¶”ê°€
- [ ] ServiceRegistration ì—…ë°ì´íŠ¸

### Phase 4: UI Integration (1ì¼)
- [ ] TypeScript íƒ€ì… ì •ì˜
- [ ] IPC í•¸ë“¤ëŸ¬ êµ¬í˜„
- [ ] React ì»´í¬ë„ŒíŠ¸ ê°œë°œ

### Phase 5: Testing & Polish (1ì¼)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ë²„ê·¸ ìˆ˜ì • ë° ìµœì í™”

## 14. ìœ„í—˜ ìš”ì†Œ ë° ëŒ€ì‘ ë°©ì•ˆ

### 14.1 ë©”ëª¨ë¦¬ ì˜¤í”„ì…‹ ë³€ê²½
- **ìœ„í—˜**: ê²Œì„ íŒ¨ì¹˜ë¡œ ì¸í•œ ì˜¤í”„ì…‹ ë³€ê²½
- **ëŒ€ì‘**: ì˜¤í”„ì…‹ ì„¤ì • íŒŒì¼ ì™¸ë¶€í™”, ë™ì  ì˜¤í”„ì…‹ íƒìƒ‰

### 14.2 ì„±ëŠ¥ ì €í•˜
- **ìœ„í—˜**: ì¦ì€ ë©”ëª¨ë¦¬ ì½ê¸°ë¡œ ì¸í•œ ì„±ëŠ¥ ì˜í–¥
- **ëŒ€ì‘**: ì½ê¸° ì£¼ê¸° ì¡°ì ˆ, ìºì‹± ê°•í™”

### 14.3 ë™ê¸°í™” ë¬¸ì œ
- **ìœ„í—˜**: Core-UI ê°„ ìƒíƒœ ë¶ˆì¼ì¹˜
- **ëŒ€ì‘**: ë²„ì „ ê´€ë¦¬, ì²´í¬ì„¬ ê²€ì¦

## 15. ìŠ¹ì¸ ë° ê²€í† 

### ê²€í† ì
- í”„ë¡œì íŠ¸ ë¦¬ë“œ
- UI íŒ€
- Core íŒ€

### ìŠ¹ì¸ ê¸°ì¤€
- ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ì˜ ì¼ê´€ì„±
- ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­ ì¶©ì¡±
- í™•ì¥ ê°€ëŠ¥ì„± í™•ë³´

---

**ì‘ì„±ì¼**: 2025-01-14  
**ì‘ì„±ì**: StarcUp Development Team  
**ë²„ì „**: 1.0