@import "tailwindcss";
@import "tw-animate-css";

/* CSS Variables - Prototype 정확한 스펙 */
:root {
  /* Prototype 기본 색상 변수 */
  --error: #FF3B30;
  --text-primary: #FFFFFF;
  --text-secondary: #E0E0E0;
  --warning: #FFB800;
  --success: #00D084;
  --brand-primary: #0099FF;
  --brand-secondary: #FF6B35;
  
  /* Gray 색상 팔레트 */
  --gray-900: #1A1A1A;
  --gray-800: #2D2D2D;
  --gray-700: #4A4A4A;
  --gray-600: #6B6B6B;
  --gray-500: #9B9B9B;
  --gray-400: #C7C7C7;
  --gray-300: #E3E3E3;
  --gray-200: #F0F0F0;
  --gray-100: #F8F8F8;
  --gray-50: #FAFAFA;
  
  /* 색상 매핑 변수 */
  --color-error: var(--error);
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-warning: var(--warning);
  --color-success: var(--success);
  --color-brand-primary: var(--brand-primary);
  --color-brand-secondary: var(--brand-secondary);
  --color-gray-900: var(--gray-900);
  --color-gray-800: var(--gray-800);
  --color-gray-700: var(--gray-700);
  --color-gray-600: var(--gray-600);
  --color-gray-500: var(--gray-500);
  --color-gray-400: var(--gray-400);
  --color-gray-300: var(--gray-300);
  --color-gray-200: var(--gray-200);
  --color-gray-100: var(--gray-100);
  --color-gray-50: var(--gray-50);
  
  /* 오버레이 관련 변수 */
  --color-overlay-bg: rgba(0, 0, 0, 0.85);
  --color-overlay-border: rgba(255, 255, 255, 0.2);
  --overlay-border: rgba(255, 255, 255, 0.2);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  width: 100%;
  height: 100%;
  background: transparent;
  overflow: hidden;
  margin: 0;
  padding: 0;
}

#root {
  width: 100%;
  height: 100%;
  background: transparent;
  pointer-events: none;
}

.overlay-container {
  width: 100vw;
  height: 100vh;
  position: relative;
  overflow: hidden;
  background: transparent;
  pointer-events: none;
}

.hello-world {
  transition: all 0.1s ease-out;
  white-space: nowrap;
}

.debug-info {
  transition: opacity 0.3s ease;
  pointer-events: auto;
  cursor: default;
}

/* 스크롤바 숨김 */
::-webkit-scrollbar {
  display: none;
}

/* 텍스트 선택 방지 */
* {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* 오버레이 컨테이너 기본 스타일 */
.overlay-container {
  position: relative;
  overflow: hidden;
  background: transparent;
  pointer-events: none;
}

/* 편집 모드 배경 효과 */
.edit-mode-backdrop {
  backdrop-filter: blur(8px) saturate(1.2);
  -webkit-backdrop-filter: blur(8px) saturate(1.2);
}

/* WorkerStatus 기본 스타일 - Prototype 정확한 스펙 */
.worker-status {
  background-color: var(--color-overlay-bg);
  border-radius: 6px;
  padding: 8px 12px;
  display: flex;
  align-items: center;
  gap: 10px;
  width: 99px;
  min-height: 36px;
  z-index: 1000;
  cursor: default;
  transition: all 0.2s ease;
  pointer-events: auto;
  user-select: none;
}

/* 편집 모드 스타일 */
.worker-status.edit-mode {
  border: 1px solid rgba(0, 153, 255, 0.5);
  z-index: 1001;
  cursor: move;
  box-shadow: 0 4px 20px rgba(0, 153, 255, 0.3);
}

/* 드래그 중일 때 */
.worker-status.dragging {
  transition: none;
}

/* 생산 완료 이펙트 (파란색) */
.worker-status.spawn-effect {
  animation: spawnCounterEffect 0.8s ease-out;
  border-color: #2196F3 !important;
  color: #2196F3 !important;
  box-shadow: 
    0 0 30px rgba(33, 150, 243, 0.8),
    inset 0 0 20px rgba(33, 150, 243, 0.2) !important;
}

@keyframes spawnCounterEffect {
  0% {
    filter: brightness(1);
    background: rgba(0, 0, 0, 0.85);
  }
  20% {
    filter: brightness(1.5);
    border-color: #64B5F6;
    background: 
      linear-gradient(rgba(33, 150, 243, 0.2), rgba(33, 150, 243, 0.2)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
    box-shadow: 
      0 0 40px rgba(33, 150, 243, 1),
      inset 0 0 25px rgba(33, 150, 243, 0.4);
  }
  40% {
    filter: brightness(1.3);
    background: 
      linear-gradient(rgba(33, 150, 243, 0.15), rgba(33, 150, 243, 0.15)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  60% {
    filter: brightness(1.1);
    background: 
      linear-gradient(rgba(33, 150, 243, 0.1), rgba(33, 150, 243, 0.1)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  100% {
    filter: brightness(1);
    background: rgba(0, 0, 0, 0.85);
  }
}

/* 일꾼 사망 이펙트 (빨간색) */
.worker-status.death-effect {
  animation: deathCounterEffect 0.6s ease-out;
  border-color: #f44336 !important;
  color: #f44336 !important;
  box-shadow: 
    0 0 25px rgba(244, 67, 54, 0.8),
    inset 0 0 15px rgba(244, 67, 54, 0.3) !important;
}

/* 사망 효과 시 모든 텍스트 색상을 빨간색으로 강제 변경 */
.worker-status.death-effect * {
  color: #f44336 !important;
}

@keyframes deathCounterEffect {
  0% {
    filter: brightness(1);
    background: rgba(0, 0, 0, 0.85);
  }
  10% {
    filter: brightness(1.8) saturate(1.5);
    border-color: #FF5722;
    background: 
      linear-gradient(rgba(244, 67, 54, 0.2), rgba(244, 67, 54, 0.2)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  20% {
    filter: brightness(1.6);
    background: 
      linear-gradient(rgba(244, 67, 54, 0.15), rgba(244, 67, 54, 0.15)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  30% {
    filter: brightness(1.4);
    background: 
      linear-gradient(rgba(244, 67, 54, 0.1), rgba(244, 67, 54, 0.1)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  40% {
    filter: brightness(1.2);
    background: 
      linear-gradient(rgba(244, 67, 54, 0.05), rgba(244, 67, 54, 0.05)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  50% {
    filter: brightness(1.1);
  }
  60% {
    filter: brightness(1.05);
  }
  100% {
    filter: brightness(1);
    background: rgba(0, 0, 0, 0.85);
  }
}

/* 인구 경고 알람 애니메이션 */
@keyframes supplyAlertPulse {
  0% {
    transform: translateX(-50%) scale(1);
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
  50% {
    transform: translateX(-50%) scale(1.05);
    box-shadow: 0 0 30px rgba(220, 38, 38, 0.8), inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
  100% {
    transform: translateX(-50%) scale(1);
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
}

@keyframes supplyAlertSlideIn {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(-20px) scale(0.9);
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
}

@keyframes supplyAlertBlink {
  0% {
    opacity: 1;
    filter: drop-shadow(0 0 4px rgba(255, 255, 0, 0.8));
  }
  50% {
    opacity: 0.6;
    filter: drop-shadow(0 0 8px rgba(255, 255, 0, 1));
  }
  100% {
    opacity: 1;
    filter: drop-shadow(0 0 4px rgba(255, 255, 0, 0.8));
  }
}

/* PopulationWarning 기본 스타일 */
.population-warning {
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

/* PopulationWarning 편집 모드 스타일 */
.population-warning.edit-mode {
  border: 1px solid rgba(0, 153, 255, 0.5) !important;
  box-shadow: 0 4px 20px rgba(0, 153, 255, 0.3), 0 4px 20px rgba(220, 38, 38, 0.4) !important;
  z-index: 20001;
}

/* 드래그 중일 때 */
.population-warning.dragging {
  transition: none !important;
}

/* 인구 경고 알람 기본 스타일 (기존 호환성) */
.supply-alert {
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

/* UpgradeProgress 기본 스타일 */
.upgrade-progress {
  background-color: var(--color-overlay-bg);
  border-radius: 6px;
  padding: 8px 12px;
  z-index: 1000;
  cursor: default;
  transition: all 0.2s ease;
  pointer-events: auto;
  user-select: none;
}

/* 편집 모드 스타일 */
.upgrade-progress.edit-mode {
  border: 1px solid rgba(0, 153, 255, 0.5);
  z-index: 1002;
  cursor: move;
  box-shadow: 0 4px 20px rgba(0, 153, 255, 0.3);
}

/* 드래그 중일 때 */
.upgrade-progress.dragging {
  transition: none;
}

/* 업그레이드 완료 이펙트 (초록색) */
.upgrade-progress.upgrade-completed-effect {
  animation: upgradeCompletedEffect 1.2s ease-out;
  border-color: #00D084 !important;
  box-shadow: 
    0 0 30px rgba(0, 208, 132, 0.8),
    inset 0 0 20px rgba(0, 208, 132, 0.2) !important;
}

@keyframes upgradeCompletedEffect {
  0% {
    filter: brightness(1);
    background: rgba(0, 0, 0, 0.85);
  }
  20% {
    filter: brightness(1.5);
    border-color: #00FF94;
    background: 
      linear-gradient(rgba(0, 208, 132, 0.2), rgba(0, 208, 132, 0.2)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
    box-shadow: 
      0 0 40px rgba(0, 208, 132, 1),
      inset 0 0 25px rgba(0, 208, 132, 0.4);
  }
  40% {
    filter: brightness(1.3);
    background: 
      linear-gradient(rgba(0, 208, 132, 0.15), rgba(0, 208, 132, 0.15)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  60% {
    filter: brightness(1.1);
    background: 
      linear-gradient(rgba(0, 208, 132, 0.1), rgba(0, 208, 132, 0.1)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  100% {
    filter: brightness(1);
    background: rgba(0, 0, 0, 0.85);
  }
}

/* 업그레이드 취소 이펙트 (주황색) */
.upgrade-progress.upgrade-canceled-effect {
  animation: upgradeCanceledEffect 0.6s ease-out;
  border-color: #FFB800 !important;
  box-shadow: 
    0 0 25px rgba(255, 184, 0, 0.8),
    inset 0 0 15px rgba(255, 184, 0, 0.3) !important;
}

@keyframes upgradeCanceledEffect {
  0% {
    filter: brightness(1);
    background: rgba(0, 0, 0, 0.85);
  }
  10% {
    filter: brightness(1.6);
    border-color: #FFC107;
    background: 
      linear-gradient(rgba(255, 184, 0, 0.2), rgba(255, 184, 0, 0.2)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  20% {
    filter: brightness(1.4);
    background: 
      linear-gradient(rgba(255, 184, 0, 0.15), rgba(255, 184, 0, 0.15)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  40% {
    filter: brightness(1.2);
    background: 
      linear-gradient(rgba(255, 184, 0, 0.1), rgba(255, 184, 0, 0.1)),
      rgba(0, 0, 0, 0.85);
    background-blend-mode: multiply;
  }
  60% {
    filter: brightness(1.1);
  }
  100% {
    filter: brightness(1);
    background: rgba(0, 0, 0, 0.85);
  }
}

/* 업그레이드 완료 애니메이션 (프로토타입 사양) */
@keyframes fadeToLeft {
  0% {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
    opacity: 1;
    transform: translateX(0);
  }
  30% {
    opacity: 0.9;
  }
  70% {
    clip-path: polygon(0 0, 30% 0, 30% 100%, 0 100%);
    opacity: 0.6;
    transform: translateX(-2px);
  }
  100% {
    clip-path: polygon(0 0, 0 0, 0 100%, 0 100%);
    opacity: 0.2;
    transform: translateX(-8px);
  }
}

.upgrade-completing {
  animation: fadeToLeft 1.2s ease-in-out forwards;
}